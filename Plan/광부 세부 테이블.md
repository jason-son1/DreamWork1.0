
이 문서는 개발자가 `config.yml`을 설정하고 `EventListener`를 코딩할 때 기준이 되는 구체적인 기획서입니다.

---
**해당 내용은 예시이며, 실제로 플러그인 제작시, 아래의 실제 값들과 내용 content들은 자유롭게 설정가능한 부분이어야 함.**

### 1. 경험치 및 보상 테이블 (Experience & Rewards)

**핵심 로직:** 단순 코블스톤 채굴 노가다를 지양하고, **광물 발견**과 **희귀 드롭**에 높은 비중을 둡니다.

|**대상 (Target Block)**|**등급 (Tier)**|**기본 경험치 (Exp)**|**기본 수입 (Money)**|**비고 (Implementation Note)**|
|---|---|---|---|---|
|**돌, 심층암, 네더랙**|Tier 0|0.1|0|매크로 방지. 아주 미미한 경험치만 지급.|
|**석탄, 구리, 철 (원석)**|Tier 1|5.0|2.0|초반 주력. `Fortune` 인챈트와 무관하게 1회 파괴 기준.|
|**금, 레드스톤, 청금석**|Tier 2|15.0|5.0|중반 주력.|
|**다이아몬드, 에메랄드**|Tier 3|50.0|30.0|발견 시 메시지 출력 옵션 (Config).|
|**고대 잔해 (Debris)**|Tier 4|150.0|100.0|네더 채광의 핵심 목표.|
|**미지의 광석 (Unknown)**|Event|30.0|0|채광 시 확률적 드롭 (Money 대신 '감정' 후 대박 보상).|
|**드림 스톤 (Dream Stone)**|Special|500.0|200.0|전설 재료. 서버 전체 알림.|

- **변동 확률 (Dynamic Chance):** 드림 스톤과 미지의 광석 드롭률은 **[광부의 몰입]** 단계에 따라 가중치가 부여됩니다2.
    
    - 공식: $P_{drop} = P_{base} \times (1 + Level \times 0.01) \times Multiplier_{trance}$
        

---

### 2. 스킬 상세 명세 (Skill Mechanics)

액티브 스킬은 도구와의 상호작용으로, 패시브는 조건부 버프로 구현합니다.

#### 2.1.

[액티브] 광맥 탐지 (Ore Radar) 3333

- **발동 조건:** 광부 전용 곡괭이를 들고 `우클릭` (쿨타임 존재).
    
- **구현 로직:** 플레이어 기준 반경 $R$ 블록 내의 `Block`을 스캔하여 특정 재질(Material)의 개수를 카운트.
    

|**레벨 (Lv)**|**탐지 반경 (R)**|**쿨타임**|**표시 정보 (Output)**|
|---|---|---|---|
|**1 ~ 9**|10 blocks|60s|철/석탄의 **유무**만 표시 ("철이 근처에 있습니다").|
|**10 ~ 29**|20 blocks|45s|주요 광물의 **대략적 수량** ("철이 소량, 금이 다량 감지됨").|
|**30 ~ 49**|30 blocks|30s|**정확한 수량** 및 방향 힌트 ("북동쪽에 다이아몬드 3개 매장됨").|
|**50 (Max)**|30 blocks|15s|**드림스톤/미지의 광석** 탐지 가능 + 발광(Glowing) 효과 5초 적용(선택).|

#### 2.2.

[패시브] 지하 적응 (Cave Adaptation) 4

- **발동 조건:** Y좌표 0 이하(Deepslate 층) 또는 네더(Nether) 월드.
    

|**레벨 (Lv)**|**효과 1 (낙하 피해)**|**효과 2 (버프)**|**효과 3 (특수)**|
|---|---|---|---|
|**10+**|10% 감소|-|-|
|**30+**|20% 감소|성급함(Haste) I (상시)|용암 데미지 10% 감소|
|**50+**|30% 감소|성급함 II (상시)|용암에 빠질 시 `화염 저항` 10초 발동 (쿨타임 5분)|

#### 2.3.

[패시브] 광부의 몰입 (Miner's Trance) 5

- **구현 로직:** `PlayerMoveEvent`로 청크 이동 감지. 한 청크(16x16) 내에서 `BlockBreakEvent`가 지속적으로 발생하면 타이머 증가.
    

|**단계 (Stage)**|**필요 시간**|**효과 (Buff)**|**시각 효과**|
|---|---|---|---|
|**1단계**|10분 지속|경험치 획득량 +10%|화면 하단 액션바 "몰입 중..." 표시|
|**2단계**|20분 지속|광물 드롭률 소폭 상승 (Fortune +0.5 효과)|곡괭이에 미세한 파티클|
|**3단계**|30분 이상|**미지의 광석/드림스톤** 발견 확률 2배|주변에 희미한 발광 효과|

---

### 3. 아이템 및 데이터 구조 (Items & PDC)

모든 커스텀 아이템은 바닐라 아이템에 NBT(PDC) 태그를 부여하여 식별합니다.

#### 3.1.

성장형 곡괭이 (Evolving Pickaxe) 6

- **기본 구조:** `Material.DIAMOND_PICKAXE` + PDC Data.
    
- **PDC Key:** `dreamwork:pickaxe_type`, `dreamwork:exp`
    

|**등급**|**아이템 명**|**제작/해금 조건**|**PDC/Lore 특징**|**특수 능력**|
|---|---|---|---|---|
|**초급**|**수습생의 곡괭이**|Lv.10 + 철|`Tier: 1`|내구도 +50%|
|**중급**|**개척자의 곡괭이**|Lv.30 + 다이아|`Tier: 2`|채굴 속도 증가, **광맥 탐지 Lv.2** 사용 가능|
|**고급**|**장인의 곡괭이**|Lv.50 + 합금|`Tier: 3`|**행운의 손** (희귀 드롭률 증가), **수리 가능**|
|**전설**|**대지의 심장**|미션 + 드림스톤|`Tier: 4`|**용암 파괴**(용암을 캐면 흑요석/코블로 즉시 변환)|

#### 3.2.

특수 자원 (Special Resources) 7777

1. **미지의 광석 (Unidentified Ore)**
    
    - **Item:** `Material.RAW_IRON` (또는 `FLINT`)
        
    - **PDC:** `type: unknown_ore`, `rarity: random`
        
    - **Lore:** _"정체를 알 수 없는 묵직한 돌덩이입니다. 대장간에서 감정할 수 있습니다."_
        
    - **용도:** 대장간 NPC에게 가져가면 확률적으로 **금, 다이아, 에메랄드, 화석(장식품)** 등으로 변환.
        
2. **합금 (Alloy)** 8
    
    - **Item:** `Material.IRON_INGOT` (Glint 효과 추가)
        
    - **PDC:** `type: reinforced_alloy`
        
    - **제작:** 철 + 금 + 구리 + 석탄 (대장간 전용 레시피).
        
    - **용도:** 상위 티어 곡괭이 제작, **건축가(Architect)**의 보호 구역 설정 블록(신호기 등) 재료.
        
3. **소모품: 숫돌 (Whetstone)** 9
    
    - **Item:** `Material.CLAY_BALL`
        
    - **효과:** 곡괭이에 우클릭 시 10분간 `채굴 속도(Efficiency)` +1 레벨 효과 부여 (일시적 인챈트 강화).
        

---

### 4. 미션 및 승급 시스템 (Missions & Ranks)

레벨업만으로는 스킬이 해금되지 않으며, **승급 심사(Mission)**를 통과해야 합니다.

|**랭크 (Title)**|**필요 레벨**|**승급 미션 (Objective)**|**해금 보상 (Reward)**|
|---|---|---|---|
|**견습 광부**|Lv. 10|**석탄 500개 채굴**|[액티브] 광맥 탐지 Lv.1, 수습생 곡괭이 레시피|
|**숙련 광부**|Lv. 30|**철 1,000개 + 금 300개 납품**|[패시브] 지하 적응, 합금(Alloy) 제작 권한|
|**전문 광부**|Lv. 50|**미지의 광석 50회 감정**|[액티브] 광맥 탐지(Max), 장인의 곡괭이 레시피|
|**대장장이**|Special|**합금 100개 제작**|**대장간 운영 권한** (타 유저 장비 수리/강화 가능)|
|**전설의 광부**|Lv. Max|**드림스톤 발견**|**전설 곡괭이**, 서버 명예의 전당 등록|

---

5. 경제 및 타운 시스템 연동 (Economy & Forge) 10

타운 내 **[대장간(The Forge)]** 시설을 중심으로 경제가 순환합니다.

#### 5.1. 대장간 GUI (DreamShop/InvInteraction)

- **위치:** 타운 내 특정 좌표 or NPC.
    
- **기능 1: 감정 (Identify)**
    
    - `미지의 광석`을 슬롯에 넣고 비용(5 Money)을 지불하면 랜덤한 광물로 변환.
        
    - _Logic:_ `Math.random()`을 돌려 꽝(돌), 당첨(다이아), 대박(고대 잔해) 결정.
        
- **기능 2: 제련 (Smelt Alloy)**
    
    - 일반 화로에서 구울 수 없는 **합금**을 제작.
        
    - _Recipe:_ 철괴 10 + 구리괴 10 + 금괴 5 = **강화 합금 1개**.
        
- **기능 3: 수리 (Repair)**
    
    - PDC가 붙은 **전용 곡괭이**는 모루에서 수리가 불가능(Too Expensive)하거나 바닐라 방식 제한.
        
    - 대장간에서 `합금`을 지불하여 내구도 복구.
        

#### 5.2. 경제 순환 모델 (The Loop)

1. **광부**는 야생에서 `미지의 광석`과 원석을 캠.
    
2. **타운 대장간**에서 수수료를 내고 감정/제련함 (Money 회수).
    
3. 제작된 `합금`과 `건축 자재(심층암 벽돌 등)`를 **건축가(Architect)** 유저에게 판매 (유저 간 거래 활성화).
    
4. 건축가는 `합금`을 소모하여 자신의 땅(Plot)을 확장하거나 특수 건물 건설.
    

---

### 💡 개발자(User)를 위한 구현 팁 (Technical Note)

+4

1. **Event Listener:**
    
    - `BlockBreakEvent`: 경험치 지급, PDC 곡괭이 체크, 미지의 광석 드롭 로직.
        
    - `PlayerInteractEvent`: 광맥 탐지(우클릭), 숫돌 사용 감지.
        
    - `PlayerMoveEvent`: 광부의 몰입(Trance) 체크 (퍼포먼스를 위해 1초에 1번만 체크하거나 Scheduler 사용 권장).
        
2. **Config 구성 (`jobs/miner.yml`):**
    
    YAML
    
    ```
    ore-radar:
      cooldown: [60, 45, 30, 15] # 레벨 구간별 쿨타임
      radius: [10, 20, 30, 30]
    
    rewards:
      unknown-ore-chance: 0.05 # 5% 기본 확률
      dream-stone-chance: 0.001 # 0.1% 극악 확률
    ```
    
3. **No-Database Strategy:**
    
    - 플레이어의 레벨, 경험치, 미션 진행도는 `FlatFile` (YAML) 또는 `PDC`(플레이어 데이터 컨테이너)에 저장하여 관리합니다. 소규모 서버이므로 파일 입출력 부하는 무시할 수준입니다.

