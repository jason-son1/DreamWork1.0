# Project DreamWork: DreamCore 컨텐츠 상세 기획서

** 해당 내용은 단순히 실제 구현 예시이다. 실제 구현은 만들어질 Engine Plugin에 의해서 서버개발자가 직접 만들고 수정할 수 있어야 한다.**

본 문서는 `Project DreamWork`의 핵심 플러그인인 **DreamCore**가 처리할 실제 게임 내 컨텐츠 데이터를 정의합니다. 개발 시 이 수치와 로직을 기준으로 `Manager` 클래스들을 구현합니다.

## 1. 직업 시스템 (Job System)

**구현 클래스:** `JobManager`, `JobProvider` (Interface)

야생에서의 활동을 RPG 요소로 변환하는 핵심입니다. 각 직업은 1~100 레벨을 가지며, 특정 레벨 구간마다 패시브/액티브 능력이 해금됩니다.

### 1.1. 광부 (Miner)

- **획득 경험치:** 돌(1), 석탄(5), 철(10), 금(20), 다이아몬드(50), 에메랄드(100)
    
- **스탯 보너스:** 레벨업 당 $CON + 1$, $STR + 0.5$
    

|레벨|스킬 이름|타입|설명|구현 로직|
|---|---|---|---|---|
|10|**단단한 피부**|Passive|받는 물리 데미지 5% 감소|`EntityDamageByEntityEvent`에서 데미지 연산 시 계수 적용|
|30|**슈퍼 히트**|Active|30초간 채광한 광물을 즉시 제련된 상태로 획득 (쿨타임 5분)|`BlockBreakEvent`에서 드롭 아이템 교체 (`IRON_ORE` -> `IRON_INGOT`)|
|50|**광맥 발견**|Passive|광물 채광 시 5% 확률로 주변 동일 광물 연쇄 파괴|재귀 함수(Recursive) 또는 BFS 탐색으로 연결된 블록 파괴 로직 실행|
|80|**보석 탐지**|Passive|돌 채광 시 0.1% 확률로 랜덤 보석(다이아/에메랄드) 드롭|난수 생성(`Math.random`) 후 추가 드롭|

### 1.2. 낚시꾼 (Fisher)

- **획득 경험치:** 일반 물고기(10), 희귀 물고기(50), 보물(100)
    
- **스탯 보너스:** 레벨업 당 $DEX + 1$, $INT + 0.5$
    

|레벨|스킬 이름|타입|설명|구현 로직|
|---|---|---|---|---|
|10|**인내심**|Passive|낚시 찌를 무는 시간 10% 단축|`PlayerFishEvent` (CAUGHT_FISH) 이전 단계에서 틱(Tick) 조절 (NMS 필요 가능성 있음) 혹은 루어 인챈트 효과 증폭|
|30|**월척**|Active|1분간 희귀 물고기 낚을 확률 2배 증가 (쿨타임 10분)|`LootTable` 계산 로직에 `Luck` 스탯 임시 가산|
|50|**바다의 행운**|Passive|낚시 성공 시 10% 확률로 낚시 내구도 소모 안 함|`PlayerFishEvent`에서 아이템 내구도 감소 캔슬|
|80|**심해의 보물**|Passive|낚시로만 얻을 수 있는 '고대 주화'(상점 판매용) 획득 가능|커스텀 아이템 `Ancient Coin` 드롭 테이블 추가|

### 1.3. 사냥꾼 (Hunter)

- **획득 경험치:** 일반 몬스터(10), 적대적 몬스터(20), 보스(500)
    
- **스탯 보너스:** 레벨업 당 $STR + 1$, $DEX + 0.5$
    

|레벨|스킬 이름|타입|설명|구현 로직|
|---|---|---|---|---|
|10|**약점 포착**|Passive|치명타 확률 +5%|`StatManager`에서 계산되는 `CritChance`에 영구 합산|
|30|**아드레날린**|Active|10초간 이동 속도 및 공격 속도 대폭 증가 (쿨타임 3분)|PotionEffect (`SPEED`, `HASTE`) 부여|
|50|**헤드헌터**|Passive|몬스터 처치 시 5% 확률로 머리(Head) 드롭|몬스터 처치 이벤트에서 커스텀 헤드 드롭|
|80|**학살자**|Passive|체력이 30% 이하인 적에게 주는 데미지 20% 증가|`EntityDamageByEntityEvent`에서 타겟 체력 검사 후 데미지 증폭|

## 2. 스탯 시스템 (Stat System) 상세 공식

**구현 클래스:** `StatManager`, `StatCalculator`

기획서에 명시된 공식을 기반으로 실제 코드에 적용할 구체적인 수식을 확정합니다.

### 2.1. 기본 스탯 (Base Stats)

플레이어가 직업 레벨업이나 스탯 포인트 투자로 올리는 1차 스탯입니다.

- **STR (힘):** 물리 공격력에 관여
    
- **DEX (민첩):** 치명타 확률 및 이동 속도에 관여
    
- **CON (체력):** 최대 체력 및 방어력에 관여
    
- **INT (지능):** 스킬 쿨타임 감소 및 마나(추후 마법 도입 시)에 관여
    
- **LUCK (행운):** 채집/드롭 보너스 확률
    

### 2.2. 파생 스탯 공식 (Calculated Stats)

실제 전투와 채집에 적용되는 2차 스탯입니다.

1. **물리 데미지 (Physical Damage)**
    
    - 기본 데미지(맨손)는 1로 가정합니다.
        
    - $$Damage = (WeaponDamage) + (STR \times 0.5) + BaseDamage$$
    - _예시:_ 무기 데미지 7(다이아검) + 힘 20 = $7 + 10 + 1 = 18$ 데미지
        
2. **치명타 확률 (Critical Chance)**
    
    - 기본 확률은 5%입니다. 최대 50%까지 증가합니다.
        
    - $$CritChance(\%) = 5 + \left( \frac{DEX}{Level \times 2 + 10} \times 100 \right)$$
    - _보정:_ 레벨이 오를수록 같은 DEX여도 효율이 조금씩 떨어지게 하여(Soft Cap), 꾸준한 투자를 유도합니다. 단순히 $DEX \times 0.2$로 고정할 수도 있습니다. (초기엔 고정값 추천: $Chance = 5 + (DEX \times 0.2)$)
        
3. **최대 체력 (Max Health)**
    
    - 기본 체력은 20입니다.
        
    - $$MaxHP = 20 + (CON \times 2) + (JobLevel \times 0.5)$$
4. **방어력 (Defense)**
    
    - 마인크래프트 기본 방어력 시스템 위에 추가 데미지 감소(Reduction)를 적용합니다.
        
    - $$DamageReduction(\%) = \frac{CON}{CON + 100} \times 100$$
    - _설명:_ CON이 100일 때 50% 감소, CON이 무한대로 가면 100%에 수렴하는 점감 공식입니다.
        
5. **채집 보너스 (Drop Multiplier)**
    
    - $$BonusChance(\%) = LUCK \times 0.5$$
    - _적용:_ 광물/낚시/농작물 수확 시 해당 확률로 아이템 2배 획득.
        

## 3. 아이템 & 장비 티어 (Items & MythicMobs)

**구현 도구:** MythicMobs (몹/아이템), DreamCore (스탯 적용)

서버 경제와 성장의 척도가 되는 장비 등급입니다.

### 3.1. 장비 등급 (Tier)

|등급|색상|획득처|특징|스탯 슬롯 수|
|---|---|---|---|---|
|**Common**|회색|기본 제작, 상점|바닐라 아이템과 동일|0|
|**Uncommon**|초록|낮은 레벨 몬스터, 낚시|약간의 내구도 증가|1|
|**Rare**|파랑|중간 보스, 희귀 퀘스트|추가 스탯 (STR +2 등) 붙음|2|
|**Epic**|보라|레이드 보스, 전직 보상|고유 스킬(우클릭 시 발동) 포함|3|
|**Legendary**|주황|서버 이벤트, 히든 퀘스트|압도적 스탯, 특수 이펙트|4|

### 3.2. 주요 세트 아이템 예시 (MythicMobs Config)

DreamCore는 아이템의 Lore(설명)를 파싱하여 스탯을 적용합니다.

**[세트 이름: 광부의 투지 (Miner's Set)]**

- **부위:** 헬멧, 흉갑
    
- **아이템 Lore 설정 예시:**
    
    ```
    Lore:
      - "&7등급: &aUncommon"
      - "&7착용 시 효과:"
      - "&f STR +3"
      - "&f CON +5"
      - "&f 채광 속도 +10%"
    ```
    
- **DreamCore 처리:** `InventoryClickEvent`나 `PlayerJoinEvent`에서 Lore의 `STR +3` 문자열을 파싱하여 `StatManager`에 반영.
    

## 4. 퀘스트 시스템 (Quest System)

**구현 클래스:** `QuestManager` **저장소:** `quest_pool.yml`, DB(`player_quests`)

계획서에 따라 매일 자정 초기화되는 데일리 퀘스트와 시나리오 기반 메인 퀘스트로 나뉩니다.

### 4.1. 퀘스트 풀 (quest_pool.yml) 구성안

실제 YAML 파일 구조 예시입니다.

```
daily_quests:
  dq_mining_01:
    name: "아침의 곡괭이질"
    desc: "철 광석 30개를 캐오세요."
    difficulty: EASY
    type: BREAK
    target: IRON_ORE
    amount: 30
    rewards:
      money: 500
      exp_job: 100 # 현재 직업 경험치
      item: "coal_lump 10" # MythicMobs 아이템 ID 또는 바닐라 아이템
  
  dq_fishing_01:
    name: "신선한 횟감"
    desc: "연어 10마리를 낚으세요."
    difficulty: NORMAL
    type: FISH
    target: SALMON
    amount: 10
    rewards:
      money: 1000
      exp_job: 250
  
  dq_hunting_boss:
    name: "마을의 위협"
    desc: "스켈레톤 킹(Boss)을 처치하세요."
    difficulty: HARD
    type: KILL_MOB
    target: MM_SKELETON_KING # MythicMobs Internal Name
    amount: 1
    rewards:
      money: 5000
      item: "gacha_key_rare 1"
```

### 4.2. 퀘스트 UI (GUI)

- **명령어:** `/퀘스트` 또는 `/q`
    
- **GUI 구성:**
    
    - **슬롯 11, 13, 15:** 오늘의 퀘스트 3개 (랜덤 배정)
        
    - **아이콘:**
        
        - 진행 중: 노란색 유리판 (클릭 시 진행도 확인)
            
        - 완료 가능: 에메랄드 블록 (클릭 시 보상 수령)
            
        - 완료됨: 배리어 (비활성화)
            
    - **하단:** 퀘스트 리롤(Reroll) 버튼 (비용: 1000원)
        

## 5. 경제 및 타운 밸런싱 (Economy & Town)

**연동 플러그인:** Vault, Towny

유저가 돈을 벌어야 하는 이유(Money Sink)를 만듭니다.

### 5.1. 수입원 (Income)

1. **광물 판매:** 상점에 원석 판매 (가장 기초)
    
2. **퀘스트 보상:** 일일 퀘스트 3개 완료 시 평균 3,000~5,000원 획득
    
3. **무역:** 타운 간 특산물 거래 (유저 간 거래)
    

### 5.2. 지출처 (Expenses)

1. **타운 설립 비용:** 100,000원 (초반 목표)
    
2. **타운 유지비 (Upkeep):** 하루 1,000원 + 청크 당 100원
    
    - _목적:_ 유저가 매일 접속하여 퀘스트를 깨야 마을이 유지됨.
        
3. **직업 전직/승급 비용:**
    
    - 10레벨 승급: 10,000원
        
    - 50레벨 승급: 100,000원 + 특정 아이템
        
4. **스탯 초기화:** 50,000원 (비싸게 책정하여 신중한 선택 유도)
    

## 6. 데이터베이스 스키마 설계 (DB Schema)

**구현:** MySQL / SQLite

`DreamCore`가 관리할 전용 테이블입니다.

### 6.1. player_stats

|Field|Type|Description|
|---|---|---|
|`uuid`|VARCHAR(36)|Primary Key|
|`str`|INT|힘 스탯|
|`dex`|INT|민첩 스탯|
|`con`|INT|체력 스탯|
|`int_stat`|INT|지능 스탯|
|`points`|INT|남은 스탯 포인트|

### 6.2. player_jobs

|Field|Type|Description|
|---|---|---|
|`uuid`|VARCHAR(36)|Primary Key|
|`job_type`|VARCHAR(20)|직업 종류 (MINER, FISHER...)|
|`level`|INT|현재 레벨|
|`exp`|DOUBLE|현재 경험치|

### 6.3. player_quests

| Field      | Type        | Description         |
| ---------- | ----------- | ------------------- |
| `uuid`     | VARCHAR(36) | Primary Key         |
| `quest_id` | VARCHAR(50) | 진행 중인 퀘스트 ID        |
| `progress` | INT         | 현재 진행도 (마리 수/개수)    |
| `state`    | VARCHAR(10) | ACCEPTED, COMPLETED |
| `date`     | DATE        | 퀘스트 받은 날짜 (일일 초기화용) |